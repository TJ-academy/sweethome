<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>숙소 비교하기</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-color: #fafafa;
      color: #222;
    }

    .container {
      max-width: 1100px;
    }

    /* ===== 상단 헤더 ===== */
    .compare-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 30px;
    }

    .compare-header h1 {
      font-size: 1.8rem;
      font-weight: 700;
    }

    #backButton {
      background: none;
      border: none;
      color: #666;
      font-size: 1.1rem;
      cursor: pointer;
    }

    #backButton:hover {
      color: #000;
    }

    /* ===== 탭 ===== */
    .nav-tabs {
      border: none;
      justify-content: center;
      margin-bottom: 40px;
    }

    .nav-tabs .nav-link {
      border: 1px solid #ddd;
      border-radius: 50px;
      margin: 0 6px;
      color: #555;
      font-weight: 500;
      padding: 6px 20px;
    }

    .nav-tabs .nav-link.active {
      background: #000;
      color: #fff;
      border-color: #000;
    }

    /* ===== 카드 레이아웃 ===== */
    .compare-grid {
      display: flex;
      justify-content: space-between;
      gap: 20px;
      text-align: center;
      margin-bottom: 50px;
    }

    .compare-card {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      flex: 1;
      padding: 20px 15px 25px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.25s;
    }

    .compare-card:hover {
      transform: translateY(-5px);
    }

    .compare-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 12px;
      margin-bottom: 10px;
    }

    .compare-card h6 {
      color: #4ea3ff;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .compare-card h5 {
      font-weight: 700;
      font-size: 1rem;
      min-height: 40px;
      margin-bottom: 4px;
    }

    .compare-card p {
      font-size: 0.9rem;
      color: #777;
      margin-bottom: 3px;
    }

    .compare-card .price {
      color: #e74c3c;
      font-weight: 700;
      font-size: 1.05rem;
    }

    .compare-card .total {
      color: #aaa;
      font-size: 0.85rem;
      margin-bottom: 8px;
    }

    .reserve-btn {
      background: #4ea3ff;
      color: #fff;
      border: none;
      border-radius: 10px;
      padding: 9px 0;
      font-weight: 600;
      transition: 0.2s;
      margin-top: auto;
    }

    .reserve-btn:hover {
      background: #2e8bff;
    }

    /* ===== 옵션 그룹 ===== */
    .option-group {
      text-align: left;
      margin-top: 25px;
    }

    .option-group h5 {
      font-size: 1rem;
      font-weight: 700;
      color: #111;
      margin: 8px 0 2px;
    }

    .option-list {
      list-style: none;
      padding-left: 16px;
      margin-bottom: 6px;
      color: #444;
      font-size: 0.9rem;
      line-height: 1.4;
    }

    .option-list li::before {
      content: "•";
      color: #4ea3ff;
      margin-right: 5px;
    }

    @media (max-width: 992px) {
      .compare-grid {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
<div th:insert="fragments/header :: menuBar"></div>

<div class="container mt-5">
  <div class="compare-header">
    <h1>비교하기</h1>
    <button id="backButton">← 이전 화면</button>
  </div>

  <!-- 탭 -->
  <ul class="nav nav-tabs" id="compareTabs" role="tablist">
    <li class="nav-item"><button class="nav-link active" id="all-tab" data-bs-toggle="tab" data-bs-target="#all" type="button">전체</button></li>
    <li class="nav-item"><button class="nav-link" id="price-tab" data-bs-toggle="tab" data-bs-target="#price" type="button">가격</button></li>
    <li class="nav-item"><button class="nav-link" id="likes-tab" data-bs-toggle="tab" data-bs-target="#likes" type="button">추천 수</button></li>
    <li class="nav-item"><button class="nav-link" id="options-tab" data-bs-toggle="tab" data-bs-target="#options" type="button">옵션</button></li>
  </ul>

  <div class="tab-content mt-4" id="compareTabsContent">

    <!-- ✅ 전체 탭 -->
    <div class="tab-pane fade show active" id="all" role="tabpanel">
      <!-- TOP 숙소 카드 -->
      <div class="compare-grid">
        <div class="compare-card" th:each="detail, iter : ${compareHomeDetails}">
          <h6 th:text="'TOP ' + ${iter.index + 1}">TOP 1</h6>
          <img th:src="@{${detail.thumbnail}}" alt="썸네일">
          <h5 th:text="${detail.title}">서울의 아파트</h5>
          <p class="price" th:text="|기본 (1박) ₩${#numbers.formatInteger(detail.costBasic,3,'COMMA')}|">₩133,125</p>
          <p class="price" th:text="|주말/성수기 ₩${#numbers.formatInteger(detail.costExpen,3,'COMMA')}|">₩150,000</p>
          <p th:text="|★ ${detail.likeCount}|">★ 4.48</p>
          <button class="reserve-btn">예약하기</button>
        </div>
      </div>

      <!-- 옵션 그룹 -->
      <div class="section-title">옵션</div>
      <div class="compare-grid">
        <div class="compare-card" th:each="detail, iter : ${compareHomeDetails}">
          <div class="option-group">
            <h5>서비스</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('서비스') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('서비스')}" th:text="${opt}">옵션</li>
            </ul>

            <h5>위치 특성</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('위치 특성') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('위치 특성')}" th:text="${opt}">옵션</li>
            </ul>

            <h5>주차장 및 기타 시설</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('주차장 및 기타 시설') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('주차장 및 기타 시설')}" th:text="${opt}">옵션</li>
            </ul>

            <h5>숙소 안전</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('숙소 안전') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('숙소 안전')}" th:text="${opt}">옵션</li>
            </ul>

            <h5>엔터테인먼트</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('엔터테인먼트') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('엔터테인먼트')}" th:text="${opt}">옵션</li>
            </ul>

            <h5>인터넷 및 업무 공간</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('인터넷 및 업무 공간') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('인터넷 및 업무 공간')}" th:text="${opt}">옵션</li>
            </ul>

            <h5>냉난방</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('냉난방') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('냉난방')}" th:text="${opt}">옵션</li>
            </ul>

            <h5>침실 및 세탁</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('침실 및 세탁') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('침실 및 세탁')}" th:text="${opt}">옵션</li>
            </ul>

            <h5>욕실</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('욕실') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('욕실')}" th:text="${opt}">옵션</li>
            </ul>

            <h5>주방 및 식사 공간</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('주방 및 식사 공간') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('주방 및 식사 공간')}" th:text="${opt}">옵션</li>
            </ul>

            <h5>기타</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('기타') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('기타')}" th:text="${opt}">옵션</li>
            </ul>
          </div>
        </div>
      </div>
    </div> <!-- ✅ 전체 탭 닫힘 -->

    <!-- 가격 탭 -->
    <div class="tab-pane fade" id="price" role="tabpanel">
      <div class="compare-grid">
        <div class="compare-card" th:each="detail, iter : ${compareHomeDetails}">
          <h6 th:text="'TOP ' + ${iter.index + 1}">TOP 1</h6>
          <img th:src="@{${detail.thumbnail}}" alt="썸네일">
          <h5 th:text="${detail.title}">서울의 아파트</h5>
          <p class="price" th:text="|기본 (1박) ₩${#numbers.formatInteger(detail.costBasic,3,'COMMA')}|">₩133,125</p>
          <p class="total" th:text="|주말/성수기 ₩${#numbers.formatInteger(detail.costExpen,3,'COMMA')}|">₩150,000</p>
          <button class="reserve-btn">예약하기</button>
        </div>
      </div>
    </div>

    <!-- 추천수 탭 -->
    <div class="tab-pane fade" id="likes" role="tabpanel">
      <div class="compare-grid">
        <div class="compare-card" th:each="detail, iter : ${compareHomeDetails}">
          <h6 th:text="'TOP ' + ${iter.index + 1}">TOP 1</h6>
          <img th:src="@{${detail.thumbnail}}" alt="썸네일">
          <h5 th:text="${detail.title}">서울의 아파트</h5>
          <p th:text="|★ ${detail.likeCount}|">★ 4.48</p>
          <button class="reserve-btn">예약하기</button>
        </div>
      </div>
    </div>

    <!-- 옵션 탭 -->
    <div class="tab-pane fade" id="options" role="tabpanel">
      <div class="compare-grid">
        <div class="compare-card" th:each="detail, iter : ${compareHomeDetails}">
          <h6 th:text="'TOP ' + ${iter.index + 1}">TOP 1</h6>
          <img th:src="@{${detail.thumbnail}}" alt="썸네일">
          <h5 th:text="${detail.title}">서울의 아파트</h5>
          <button class="reserve-btn">예약하기</button>
          <div class="option-group">
            <!-- 옵션 그룹 동일하게 반복 -->
            <h5>서비스</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('서비스') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('서비스')}" th:text="${opt}">옵션</li>
            </ul>
            <h5>위치 특성</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('위치 특성') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('위치 특성')}" th:text="${opt}">옵션</li>
            </ul>
            <h5>주차장 및 기타 시설</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('주차장 및 기타 시설') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('주차장 및 기타 시설')}" th:text="${opt}">옵션</li>
            </ul>
            <h5>숙소 안전</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('숙소 안전') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('숙소 안전')}" th:text="${opt}">옵션</li>
            </ul>
            <h5>엔터테인먼트</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('엔터테인먼트') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('엔터테인먼트')}" th:text="${opt}">옵션</li>
            </ul>
            <h5>인터넷 및 업무 공간</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('인터넷 및 업무 공간') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('인터넷 및 업무 공간')}" th:text="${opt}">옵션</li>
            </ul>
            <h5>냉난방</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('냉난방') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('냉난방')}" th:text="${opt}">옵션</li>
            </ul>
            <h5>침실 및 세탁</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('침실 및 세탁') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('침실 및 세탁')}" th:text="${opt}">옵션</li>
            </ul>
            <h5>욕실</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('욕실') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('욕실')}" th:text="${opt}">옵션</li>
            </ul>
            <h5>주방 및 식사 공간</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('주방 및 식사 공간') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('주방 및 식사 공간')}" th:text="${opt}">옵션</li>
            </ul>
            <h5>기타</h5>
            <ul class="option-list" th:if="${detail.groupedOptions.get('기타') != null}">
              <li th:each="opt : ${detail.groupedOptions.get('기타')}" th:text="${opt}">옵션</li>
            </ul>
          </div>
        
        </div>
      </div>
    </div>

  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
<script>
  document.getElementById('backButton').addEventListener('click', () => history.back());
</script>
</body>
</html>
