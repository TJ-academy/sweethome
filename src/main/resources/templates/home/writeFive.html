<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ìˆ™ì†Œ ê¸°ë³¸ì •ë³´ ë“±ë¡</title>

<style>
    /* ------------------------------------- */
    /* 1. ê³µí†µ ë° ë ˆì´ì•„ì›ƒ ìŠ¤íƒ€ì¼ (writeFourì—ì„œ ë³µì‚¬) */
    /* ------------------------------------- */
    body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        background-color: #f7f7f7;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
    }

    .header {
        width: 100%;
        max-width: 1400px; 
        padding: 20px 40px;
        box-sizing: border-box;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: absolute;
        top: 0;
        z-index: 100;
    }

    .exit-button {
        background: none;
        border: none;
        color: #333;
        font-size: 1em;
        padding: 8px 15px;
        cursor: pointer;
        font-weight: 500;
        transition: color 0.2s;
    }
    
    .exit-button:hover {
        color: #3aa6e9;
    }

    /* --- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ --- */
    .main-content-selection {
        width: 100%;
        max-width: 1200px;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 100px 0 100px 0; 
        flex-grow: 1;
    }

    .question-title {
        font-size: 2em;
        font-weight: 700;
        color: #333;
        margin-bottom: 10px;
        text-align: center;
    }
    
    .question-subtitle {
        font-size: 1em;
        font-weight: 400;
        color: #717171;
        margin-bottom: 50px;
        text-align: center;
    }
    
    /* ------------------------------------- */
    /* 2. ì¹´ìš´í„° ë° í¼ ì˜ì—­ ìŠ¤íƒ€ì¼ (writeFive ì „ìš©) */
    /* ------------------------------------- */
    .write-five-form-container {
        width: 100%;
        max-width: 500px; /* ì¹´ìš´í„°ëŠ” ì¢ê²Œ ë°°ì¹˜ */
        padding: 0 20px;
        box-sizing: border-box;
    }

    .counter-group {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 0;
        border-bottom: 1px solid #e0e0e0;
    }
    
    .counter-group:last-child {
        border-bottom: none;
    }
    
    .counter-label {
        font-size: 1.1em;
        font-weight: 600;
        color: #333;
    }
    
    .counter-buttons {
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .counter-button {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 1px solid #ccc;
        background-color: white;
        cursor: pointer;
        font-size: 1.25rem;
        font-weight: 600;
        transition: all 0.15s;
    }
    
    .counter-button:hover:not(:disabled) {
        border-color: #3aa6e9;
        background-color: #f0f8ff;
    }
    
    .counter-button:disabled {
        color: #ccc;
        cursor: not-allowed;
        opacity: 0.6;
    }
    
    .counter-display {
        width: 30px;
        text-align: center;
        font-size: 1.1em;
        font-weight: 600;
        background: none;
        border: none;
        padding: 0;
        pointer-events: none; 
    }
    
    /* ------------------------------------- */
    /* 3. í•˜ë‹¨ ë°” (Footer) ìŠ¤íƒ€ì¼ (writeFourì—ì„œ ë³µì‚¬) */
    /* ------------------------------------- */
    .footer-bar {
        height: 80px;
        background-color: #f0f0f0; 
        width: 100%;
        position: fixed;
        bottom: 0;
        left: 0;
        z-index: 10; 
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 40px; 
        box-sizing: border-box;
        box-shadow: 0 -2px 5px rgba(0,0,0,0.05);
    }

    .back-button {
        background: none;
        border: none;
        color: #717171;
        font-size: 1em;
        padding: 10px 15px;
        cursor: pointer;
        font-weight: 600;
    }

    .next-button {
        background-color: #3aa6e9;
        color: white;
        border: none;
        padding: 12px 25px;
        font-size: 1em;
        border-radius: 25px;
        cursor: pointer;
        font-weight: 600;
        transition: background-color 0.2s;
        opacity: 1; 
        pointer-events: auto;
    }
    
    .next-button:hover {
        background-color: #1499FF;
    }
</style>
</head>
<body>
    
    <!-- í—¤ë” (writeFour êµ¬ì¡° ìœ ì§€) -->
    <div class="header">
        <div class="logo">
        	<img src="/img/icon/logo.png" width="100" alt="ë¡œê³ ">
        </div>
        <button class="exit-button" onclick="location.href='/'">ë‚˜ê°€ê¸°</button>
    </div>

    <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ (writeFive ë‚´ìš©) -->
    <div class="main-content-selection">
        <p class="question-title">
            ìˆ™ì†Œì˜ ê¸°ë³¸ ì •ë³´ë¥¼ ì•Œë ¤ ì£¼ì„¸ìš”
        </p>
        <p class="question-subtitle">
            ì¹¨ëŒ€ ìœ í˜•ê³¼ ê°™ì€ ì„¸ë¶€ ì‚¬í•­ì€ ë‚˜ì¤‘ì— ì¶”ê°€í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </p>
        
        <div class="write-five-form-container">
            <!-- í¼ ì•¡ì…˜ì„ Controllerì˜ @PostMapping("/writeFive")ë¡œ ì§€ì • -->
            <form id="writeFiveForm" th:action="@{/home/writeFive}" method="post" th:object="${homeWriteDTO}">
                
                <!-- ğŸŒŸ í¼ ì œì¶œ ì‹œ DTOì˜ ëª¨ë“  í•„ë“œë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•œ Hidden í•„ë“œ ğŸŒŸ -->
                <!-- writeFiveì—ì„œ ì§ì ‘ì ìœ¼ë¡œ ë³€ê²½í•˜ëŠ” í•„ë“œë¥¼ ì œì™¸í•œ ëª¨ë“  í•„ë“œë¥¼ Hiddenìœ¼ë¡œ ì „ì†¡ -->
                <input type="hidden" th:field="*{hostId}" />
                <input type="hidden" th:field="*{homeType}" />
                <input type="hidden" th:field="*{address}" />
                <input type="hidden" th:field="*{detailAddress}" />
                <!-- ì—¬ê¸°ì— DTOì˜ ë‚˜ë¨¸ì§€ í•„ë“œë“¤ (ì˜ˆ: title, description, costBasic ë“±)ì„ ëª¨ë‘ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.
                     í˜„ì¬ DTO êµ¬ì¡°ë¥¼ ì•Œ ìˆ˜ ì—†ì–´ í•µì‹¬ í•„ë“œë§Œ ë‚¨ê²¼ìŠµë‹ˆë‹¤. -->
                
                <!-- ê²ŒìŠ¤íŠ¸ ìµœëŒ€ ì¸ì› (maxPeople) - ì‹¤ì œ ê°’ì€ hidden í•„ë“œê°€ ì•„ë‹Œ input íƒœê·¸ì˜ nameìœ¼ë¡œ ì „ì†¡ë¨ -->
                <input type="hidden" th:field="*{maxPeople}" data-field-name="maxPeople-hidden" />
                <input type="hidden" th:field="*{room}" data-field-name="room-hidden" />
                <input type="hidden" th:field="*{bed}" data-field-name="bed-hidden" />
                <input type="hidden" th:field="*{bath}" data-field-name="bath-hidden" />
                
                
                <!-- ê²ŒìŠ¤íŠ¸ ìµœëŒ€ ì¸ì› (maxPeople) -->
                <div class="counter-group">
                    <span class="counter-label">ê²ŒìŠ¤íŠ¸ ìµœëŒ€ ì¸ì›</span>
                    <div class="counter-buttons">
                        <button type="button" class="counter-button" data-field="maxPeople" data-action="decrement" disabled>-</button>
                        <!-- type="number"ë¡œ ë°”ì¸ë”©ëœ í•„ë“œì— th:field ì ìš©í•˜ì§€ ì•Šê³ , hidden í•„ë“œë¥¼ í†µí•´ ê°’ì„ ë„˜ê¹ë‹ˆë‹¤. -->
                        <input type="number" name="maxPeople-display" th:value="*{maxPeople}" class="counter-display" min="1" readonly data-field="maxPeople" />
                        <button type="button" class="counter-button" data-field="maxPeople" data-action="increment">+</button>
                    </div>
                </div>

                <!-- ì¹¨ì‹¤ (room) -->
                <div class="counter-group">
                    <span class="counter-label">ì¹¨ì‹¤</span>
                    <div class="counter-buttons">
                        <button type="button" class="counter-button" data-field="room" data-action="decrement" disabled>-</button>
                        <input type="number" name="room-display" th:value="*{room}" class="counter-display" min="0" readonly data-field="room" />
                        <button type="button" class="counter-button" data-field="room" data-action="increment">+</button>
                    </div>
                </div>

                <!-- ì¹¨ëŒ€ (bed) -->
                <div class="counter-group">
                    <span class="counter-label">ì¹¨ëŒ€</span>
                    <div class="counter-buttons">
                        <button type="button" class="counter-button" data-field="bed" data-action="decrement" disabled>-</button>
                        <input type="number" name="bed-display" th:value="*{bed}" class="counter-display" min="0" readonly data-field="bed" />
                        <button type="button" class="counter-button" data-field="bed" data-action="increment">+</button>
                    </div>
                </div>

                <!-- ìš•ì‹¤ (bath) -->
                <div class="counter-group">
                    <span class="counter-label">ìš•ì‹¤</span>
                    <div class="counter-buttons">
                        <button type="button" class="counter-button" data-field="bath" data-action="decrement" disabled>-</button>
                        <input type="number" name="bath-display" th:value="*{bath}" class="counter-display" min="1" readonly data-field="bath" />
                        <button type="button" class="counter-button" data-field="bath" data-action="increment">+</button>
                    </div>
                </div>

            </form>
        </div>
	</div>
    
    <!-- í‘¸í„° ë°” (writeFour êµ¬ì¡° ìœ ì§€) -->
    <div class="footer-bar">
        <!-- ë’¤ë¡œ ê°€ê¸° ë²„íŠ¼: writeFourë¡œ ì´ë™ -->
        <a th:href="@{/home/writeFour}" class="back-button">ë’¤ë¡œ</a>
        
        <!-- ë‹¤ìŒ ë²„íŠ¼: í¼ ì œì¶œ (POST /home/writeFive í˜¸ì¶œ) -->
        <button class="next-button active" id="nextButton" type="submit" form="writeFiveForm">ë‹¤ìŒ</button>
    </div>

    <script th:inline="javascript">
        document.addEventListener('DOMContentLoaded', function() {
            
            // ì´ˆê¸° ìµœì†Œê°’ ì„¤ì •
            const minValues = {
                maxPeople: 1, // ìµœì†Œ 1ëª…
                room: 0,
                bed: 0,
                bath: 1       // ìµœì†Œ 1ê°œ
            };
            
            // DTO í•„ë“œëª…ê³¼ ë””ìŠ¤í”Œë ˆì´ í•„ë“œëª… ë§¤í•‘
            const fieldMap = {
                maxPeople: 'maxPeople',
                room: 'room',
                bed: 'bed',
                bath: 'bath'
            };


            function updateCounter(input, action) {
                let value = parseInt(input.value);
                const field = input.getAttribute('data-field');
                const minValue = minValues[field];
                
                // ì¦ê°€/ê°ì†Œ ë¡œì§
                if (action === 'increment') {
                    value++;
                } else if (action === 'decrement' && value > minValue) {
                    value--;
                }
                
                // ìµœëŒ€ê°’ ì œí•œ (ì˜ˆ: ê²ŒìŠ¤íŠ¸ ìµœëŒ€ 16ëª…)
                const maxValue = (field === 'maxPeople') ? 16 : 99; 
                if (value > maxValue) {
                    value = maxValue;
                }

                input.value = value;
                
                // ğŸŒŸ ì¤‘ìš”: Hidden í•„ë“œ ê°’ ì—…ë°ì´íŠ¸ (Controllerë¡œ ì „ì†¡ë  ì‹¤ì œ DTO ê°’) ğŸŒŸ
                const hiddenInput = document.querySelector(`input[name="${fieldMap[field]}"]`);
                if(hiddenInput) {
                    hiddenInput.value = value;
                }
                
                updateButtonStates(input);
            }

            function updateButtonStates(input) {
                const field = input.getAttribute('data-field');
                const value = parseInt(input.value);
                const minValue = minValues[field];
                
                // input í•„ë“œì˜ ì´ì „ í˜•ì œëŠ” 'ë¹¼ê¸°' ë²„íŠ¼
                const decrementBtn = input.previousElementSibling;
                
                // ìµœì†Œê°’ì— ë„ë‹¬í•˜ë©´ 'ë¹¼ê¸°' ë²„íŠ¼ ë¹„í™œì„±í™”
                if (value <= minValue) {
                    decrementBtn.setAttribute('disabled', 'true');
                } else {
                    decrementBtn.removeAttribute('disabled');
                }
            }

            const counters = document.querySelectorAll('.counter-buttons');

            counters.forEach(group => {
                const input = group.querySelector('.counter-display');
                const field = input.getAttribute('data-field');
                const hiddenInput = document.querySelector(`input[name="${fieldMap[field]}"]`);
                
                // 1. ì´ˆê¸°ê°’ ì„¤ì • ë° Hidden í•„ë“œ ë™ê¸°í™”
                const minValue = minValues[field];
                if (parseInt(input.value) < minValue) {
                    input.value = minValue;
                }
                if (hiddenInput) {
                    hiddenInput.value = input.value;
                }
                
                // 2. ì´ˆê¸° ìƒíƒœ ì„¤ì •
                updateButtonStates(input); 

                // 3. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                group.addEventListener('click', function(e) {
                    const button = e.target.closest('.counter-button');
                    if (button) {
                        const action = button.getAttribute('data-action');
                        if (action) {
                            updateCounter(input, action);
                        }
                    }
                });
            });

        });
    </script>
</body>
</html>
