<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>숙소 이름 설정</title>
    <!-- Tailwind CSS는 폼 필드 스타일링에만 사용하고, 레이아웃/헤더/푸터는 커스텀 CSS를 따릅니다. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ------------------------------------- */
        /* 1. 공통 및 레이아웃 스타일 (기존 스타일에서 복사) */
        /* ------------------------------------- */
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f7f7f7;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .header {
            width: 100%;
            max-width: 1400px; 
            padding: 20px 40px;
            box-sizing: border-box;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: absolute;
            top: 0;
            z-index: 100;
        }

        .exit-button {
            background: none;
            border: none;
            color: #333;
            font-size: 1em;
            padding: 8px 15px;
            cursor: pointer;
            font-weight: 500;
            transition: color 0.2s;
        }
        
        .exit-button:hover {
            color: #3aa6e9; /* 기존 버튼 호버 색상 */
        }

        /* --- 메인 콘텐츠 영역 --- */
        .main-content-selection {
            width: 100%;
            /* writeNine의 max-width 1000px를 따릅니다. */
            max-width: 1000px; 
            display: flex;
            flex-direction: column;
            align-items: center;
            /* writeNine의 padding을 따릅니다. */
            padding: 120px 20px 100px 20px; 
            flex-grow: 1;
        }

        /* ------------------------------------- */
        /* 🌟 2. 제목/소제목 스타일 (writeNine에 맞게 수정) 🌟 */
        /* ------------------------------------- */
        .question-title {
            font-size: 2.5em; /* writeNine와 동일 */
            font-weight: 700;
            color: #333;
            margin-top: 5vh;
            margin-bottom: 2vh; /* writeNine와 동일 */
            text-align: center;
        }
        
        .question-subtitle {
            font-size: 1.1em; /* writeNine와 동일 */
            font-weight: 400;
            color: #717171;
            margin-bottom: 40px; /* writeNine와 동일 */
            text-align: center;
            line-height: 1.5; /* writeNine와 동일 */
        }

        /* ------------------------------------- */
        /* 3. 하단 바 (Footer) 스타일 (기존 스타일에서 복사) */
        /* ------------------------------------- */
        .footer-bar {
            height: 80px;
            background-color: #f0f0f0; 
            width: 100%;
            position: fixed;
            bottom: 0;
            left: 0;
            z-index: 10; 
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 40px; 
            box-sizing: border-box;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.05);
        }

        .back-button {
            background: none;
            border: none;
            color: #717171;
            font-size: 1em;
            padding: 10px 15px;
            cursor: pointer;
            font-weight: 600;
        }

        .next-button {
            background-color: #3aa6e9; /* 기존 버튼 색상 */
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1em;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.2s;
            opacity: 1; 
            pointer-events: auto;
        }
        
        .next-button:hover {
            background-color: #1499FF; /* 기존 버튼 호버 색상 */
        }
    </style>
    <script>
        // 최대 글자 수: 200자로 설정
        const MAX_CHARS = 200;

        document.addEventListener('DOMContentLoaded', () => {
            const titleTextarea = document.getElementById('title');
            const charCount = document.getElementById('charCount');
            
            // 초기 카운트 설정
            const initialLength = titleTextarea.value.length;
            charCount.textContent = `${initialLength}/${MAX_CHARS}`;

            titleTextarea.addEventListener('input', () => {
                let text = titleTextarea.value;

                if (text.length > MAX_CHARS) {
                    // 200자를 초과하면 200자까지만 자릅니다.
                    text = text.substring(0, MAX_CHARS);
                    titleTextarea.value = text;
                }

                charCount.textContent = `${text.length}/${MAX_CHARS}`;
            });
        });
    </script>
</head>
<body>
    
    <!-- 헤더 (기존 구조로 변경) -->
    <div class="header">
        <div class="logo">
            <img src="/img/icon/logo.png" width="100" alt="로고">
        </div>
        <button class="exit-button" onclick="location.href='/'">나가기</button>
    </div>

    <!-- 메인 콘텐츠 영역 (기존 구조로 변경) -->
    <div class="main-content-selection">
        <!-- writeNine에 맞게 최대 너비를 가진 컨테이너 제거 및 제목 스타일 직접 적용 -->
        
        <!-- 제목 영역 -->
        <p class="question-title">
            이제 주택에 이름을 지어주세요
        </p>
        <p class="question-subtitle">
            숙소 이름은 짧을수록 효과적입니다. <br> 나중에 언제든지 변경할 수 있으니, 너무 걱정하지 마세요.
        </p>

        <form th:action="@{/home/writeTen}" method="post" th:object="${homeWriteDTO}" id="writeTenForm" class="w-full max-w-xl">
            <!-- 폼 영역의 너비를 제한하여 가운데에 오도록 합니다. -->
            
            <!-- 숙소 이름 입력 (Tailwind를 이용해 스타일 유지) -->
            <div class="text-left">
                <textarea id="title" 
                          name="title" 
                          th:field="*{title}"
                          rows="8"
                          maxlength="200"
                          placeholder="매력적인 숙소 이름을 지어주세요. (최대 200자)"
                          class="w-full p-6 border-2 border-gray-300 rounded-xl shadow-lg resize-none 
                                 focus:border-gray-900 focus:ring-0 text-xl font-medium
                                 transition duration-200 ease-in-out hover:shadow-xl"
                          required></textarea>
                
                <div class="text-sm text-gray-500 mt-2 flex justify-end">
                    <span id="charCount" class="text-base font-medium text-gray-700">0/200</span>
                </div>
            </div>

            <div th:if="${error}" class="text-red-500 mt-4 text-sm font-medium" th:text="${error}"></div>
            
        </form>
    </div>

    <!-- 푸터 바 (기존 구조로 변경) -->
    <div class="footer-bar">
        <!-- 뒤로 가기 버튼: writeNine로 이동 -->
        <a th:href="@{/home/writeNine}" class="back-button">뒤로</a>
        
        <!-- 다음 버튼: 폼 제출 (POST /home/writeTen 호출) -->
        <button class="next-button" id="nextButton" type="submit" form="writeTenForm">다음</button>
    </div>
</body>
</html>
