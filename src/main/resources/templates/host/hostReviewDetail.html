<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
<meta charset="UTF-8">
<title>리뷰 상세 | 호스트 페이지</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
	crossorigin="anonymous">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
	crossorigin="anonymous"></script>
<link rel="stylesheet" th:href="@{/css/fragments/fragments.css}">
<link rel="stylesheet" th:href="@{/css/fragments/sidebar.css}">
<link rel="stylesheet" th:href="@{/css/mypage/mypage.css}">
<link rel="stylesheet" th:href="@{/css/host/hostreview.css}">

</head>
<body>
  <div th:insert="~{fragments/header :: menuBar}"></div>

  <div class="container my-5">
    <div class="row">
      <div class="col-md-3">
        <div th:insert="~{fragments/sidebarHost :: hostSideBar}"></div>
      </div>

      <div class="col-md-9">
        <h1 class="mb-4">리뷰 상세 보기</h1>

        <!-- ✅ 리뷰 상세 카드 -->
        <div class="card detail-review">
          <div class="card-header">
            <h5 th:text="${review.home.title}">[숙소 제목]</h5>
            <span class="badge" th:text="|★ ${review.star}|">★ 5.0</span>
          </div>
          <div class="card-body">
            <h6 class="text-muted mb-2" th:text="|게스트: ${review.writer.nickname}|">게스트 닉네임</h6>
            <p class="card-text" th:text="${review.content}">
              게스트가 작성한 리뷰 내용입니다.
            </p>
            <small class="text-muted" th:text="|작성일: ${#temporals.format(review.createdAt, 'yyyy.MM.dd HH:mm')}|">작성일</small>
          </div>
        </div>

        <h2 class="mt-5 mb-3">호스트 답글</h2>

        <!-- ✅ 답글이 있을 때 -->
        <div th:if="${reply}" class="host-reply-card">
          <p th:text="${reply.content}">호스트가 작성한 답글 내용입니다.</p>
          <small th:text="|작성일: ${#temporals.format(reply.updatedAt, 'yyyy.MM.dd HH:mm')}|">답글 수정일</small>
          <div class="text-end">
            <a th:href="@{|/host/reply/edit?replyId=${reply.replyIdx}|}" class="btn btn-sm btn-outline-primary mt-3">답글 수정</a>
          </div>
        </div>

        <!-- ✅ 답글이 없을 때 -->
        <div th:unless="${reply}" class="reply-empty">
          <p>아직 이 리뷰에 대한 답글이 작성되지 않았습니다.</p>
          <a th:href="@{|/host/reply/write?reviewId=${review.reviewIdx}|}" class="btn btn-sm btn-warning mt-2">답글 작성하기</a>
        </div>

        <!-- ✅ 목록으로 돌아가기 -->
        <div class="back-btn-area">
          <a th:href="@{/host/review/list}" class="btn btn-secondary">리뷰 목록으로</a>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
