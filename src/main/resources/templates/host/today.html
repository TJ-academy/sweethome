<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>투데이 일정 | 마이페이지</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

  <link rel="stylesheet" th:href="@{/css/fragments/fragments.css}">
  <link rel="stylesheet" th:href="@{/css/fragments/sidebar.css}">
  <link rel="stylesheet" th:href="@{/css/mypage/mypage.css}">
  <link rel="stylesheet" th:href="@{/css/host/today.css}">
  
  <style>
    .home-cell {
        display: flex;
        flex-direction: column; /* 텍스트를 위아래로 쌓도록 변경 */
        gap: 2px;
    }
    .home-title {
        font-weight: bold;
    }
    .home-meta {
        font-size: 0.9em;
        color: #666;
    }
  </style>
</head>
<body>
<div th:insert="~{fragments/header :: menuBar}"></div>

<div class="mypage-layout-wrap container-fluid">
  <div class="row">
    <div class="mypage-sidebar-col">
      <div th:insert="~{fragments/sidebarHost :: hostSideBar}"></div>
    </div>

    <div class="mypage-content-col">
      <div class="mypage-content-area">

        <div class="host-tabs">
          <button class="tab-btn active">오늘</button>
          <button class="tab-btn">예정</button>
          <button class="tab-btn">예약</button>
        </div>


        <section class="host-board">
          <div class="board-header">
            <div class="board-date" th:text="${todayDate}">2025-10-24</div>
            
            </div>
          
			<br>

          <div class="chip-wrap">
            <button class="chip active">전체 숙소</button>
            
            <button class="chip" th:each="home : ${myHomes}" th:text="${home.title}"></button>
            
          </div>

          <div class="board-table">
            <table class="table booking-table">
              <thead>
              <tr>
                <th>숙소</th>
                <th>게스트</th>
                <th>상태</th>
                <th></th> </tr>
              </thead>
              <tbody>
              <tr th:each="r : ${todayReservations}">
                <td>
			        <a th:href="@{|/host/reservation/detail/${r.reservationIdx}|}" class="text-decoration-none text-dark">
			            <div class="home-cell">
			                <div class="home-title" th:text="${r.reservedHome.title}">평온한 집</div>
			                <div class="home-meta" th:text="${r.reservedHome.location}">수원시</div>
			            </div>
			        </a>
			    </td>
                
                <td>
                    <a th:href="@{|/host/reservation/detail/${r.reservationIdx}|}" 
                       th:text="${r.booker.nickname}" class="text-decoration-none text-dark">ga희</a>
                </td>
                
                <td>
                  <span th:if="${r.reservationStatus.name() == 'CONFIRMED'}" class="badge-soft pink">예약 확정</span>
                  <span th:if="${r.reservationStatus.name() == 'IN_USE'}" class="badge-soft gray">숙박 중</span>
                  <span th:if="${r.reservationStatus.name() == 'COMPLETED'}" class="badge-soft success">이용 완료</span>
                  <span th:if="${r.reservationStatus.name() == 'REQUESTED'}" class="badge-soft warning">요청 대기</span>
                  </td>
                
                <td>
                    <a th:href="@{|/host/reservation/detail/${r.reservationIdx}|}" class="btn btn-outline-primary btn-sm">상세</a>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </section>
      </div>
    </div>
  </div>
</div>

<script>
  // 버튼 토글 공통
  document.querySelectorAll('.tab-btn, .pill, .chip').forEach(btn=>{
    btn.addEventListener('click',()=>{
      btn.parentElement.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
    });
  });
</script>
</body>
</html>