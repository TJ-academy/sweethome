<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
<meta charset="UTF-8">
<title>답글 작성 | 마이페이지</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
	rel="stylesheet" crossorigin="anonymous">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
	crossorigin="anonymous"></script>
<link rel="stylesheet" th:href="@{/css/fragments/fragments.css}">
<link rel="stylesheet" th:href="@{/css/fragments/sidebar.css}">
<link rel="stylesheet" th:href="@{/css/mypage/mypage.css}">
<style>
/* 필요한 스타일 추가 */
</style>
</head>
<body>
	<div th:insert="~{fragments/header :: menuBar}"></div>

	<div class="mypage-layout-wrap container-fluid">
		<div class="row">
			<div class="mypage-sidebar-col">
				<div th:insert="~{fragments/sidebarHost :: hostSideBar}"></div>
			</div>

			<div class="mypage-content-col">
				<div class="mypage-content-area">
					<h1 class="mb-4">게스트 리뷰 관리</h1>
					<p class="text-muted mb-4">게스트가 당신의 숙소와 서비스에 대해 작성한 후기입니다. 답글을
						작성할 수 있습니다.</p>

					<div th:if="${#lists.isEmpty(reviewsAboutMe)}" class="empty-state">
						아직 작성된 후기가 없습니다.</div>

					<div class="vstack gap-3"
						th:if="${!#lists.isEmpty(reviewsAboutMe)}">
						<div class="card review-card shadow-sm"
							th:each="r : ${reviewsAboutMe}">
							<div class="card-body">
								<div class="d-flex justify-content-between align-items-start">
									<div>
										<h5 class="card-title mb-1" th:text="${r.homeTitle}">숙소
											제목</h5>
										<small class="text-muted" th:text="${r.writerNickname}">게스트
											닉네임</small> <small class="text-muted ms-2"
											th:text="${#temporals.format(r.createdAt, 'yyyy.MM.dd')}">2025.01.01</small>
									</div>
									<div>
										<span class="badge text-bg-success" th:text="|★ ${r.rating}|">★
											4.5</span>
									</div>
								</div>
								<p class="mt-3 mb-0" th:text="${r.content}">후기 내용</p>

								<div
									class="mt-3 d-flex justify-content-between align-items-center">
									<div>
										<span th:if="${r.hasReply}" class="badge bg-info text-dark">답글
											완료</span> <span th:unless="${r.hasReply}"
											class="badge bg-warning text-dark">답글 대기</span>
									</div>

									<div class="d-flex gap-2">
										<a class="btn btn-sm btn-outline-secondary"
											th:href="@{|/host/reply/detail?reservationId=${r.reservationId}&direction=GUEST_TO_HOST|}">
											리뷰 상세보기 </a> <a th:unless="${r.hasReply}"
											class="btn btn-sm btn-primary"
											th:href="@{|/host/reply/write?reviewId=${r.reviewId}|}">
											답글 작성 </a> <a th:if="${r.hasReply}"
											class="btn btn-sm btn-outline-primary"
											th:href="@{|/host/reply/edit?replyId=${r.replyId}|}"> 답글
											수정 </a>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>